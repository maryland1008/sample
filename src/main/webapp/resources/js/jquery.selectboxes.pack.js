(function(k){k.fn.extend({addOption:function(){var c=function(a,l,m,p,i){var n=document.createElement("option");n.value=l;n.text=m;m=a.options;var o=m.length;if(!a.cache){a.cache={};for(var j=0;j<o;j++)a.cache[m[j].value]=j}if(i||i==0){j=n;for(i=i;i<=o;i++){var q=a.options[i];a.options[i]=j;m[i]=j;a.cache[m[i].value]=i;j=q}}if(typeof a.cache[l]=="undefined")a.cache[l]=o;a.options[a.cache[l]]=n;if(p)n.selected=true},d=arguments;if(d.length==0)return this;var e=true,f=false,h,b,g;if(typeof d[0]=="object"){f=
true;h=d[0]}if(d.length>=2){if(typeof d[1]=="boolean"){e=d[1];startindex=d[2]}else{if(typeof d[2]=="boolean")e=d[2];startindex=d[1]}if(!f){b=d[0];g=d[1]}}this.each(function(){if(this.nodeName.toLowerCase()=="select")if(f)for(var a in h){c(this,a,h[a],e,startindex);startindex+=1}else c(this,b,g,e,startindex)});return this},ajaxAddOption:function(c,d,e,f,h){if(typeof c!="string")return this;if(typeof d!="object")d={};if(typeof e!="boolean")e=true;this.each(function(){var b=this;k.getJSON(c,d,function(g){k(b).addOption(g,
e);if(typeof f=="function")typeof h=="object"?f.apply(b,h):f.call(b)})});return this},removeOption:function(){var c=arguments;if(c.length==0)return this;var d=typeof c[0],e,f;if(d=="string"||d=="object"||d=="function"){e=c[0];if(e.constructor==Array){d=e.length;for(var h=0;h<d;h++)this.removeOption(e[h],c[1]);return this}}else if(d=="number")f=c[0];else return this;this.each(function(){if(this.nodeName.toLowerCase()=="select"){if(this.cache)this.cache=null;var b=false,g=this.options;if(e)for(var a=
g.length-1;a>=0;a--){if(e.constructor==RegExp){if(g[a].value.match(e))b=true}else if(g[a].value==e)b=true;if(b&&c[1]===true)b=g[a].selected;if(b)g[a]=null;b=false}else(b=c[1]===true?g[f].selected:true)&&this.remove(f)}});return this},sortOptions:function(c){var d=k(this).selectedValues(),e=typeof c=="undefined"?true:!!c;this.each(function(){if(this.nodeName.toLowerCase()=="select"){for(var f=this.options,h=f.length,b=[],g=0;g<h;g++)b[g]={v:f[g].value,t:f[g].text};b.sort(function(a,l){o1t=a.t.toLowerCase();
o2t=l.t.toLowerCase();if(o1t==o2t)return 0;return e?o1t<o2t?-1:1:o1t>o2t?-1:1});for(g=0;g<h;g++){f[g].text=b[g].t;f[g].value=b[g].v}}}).selectOptions(d,true);return this},selectOptions:function(c,d){var e=typeof c;if(e=="object"&&c.constructor==Array){var f=this;k.each(c,function(){f.selectOptions(this,d)})}var h=d||false;if(e!="string"&&e!="function"&&e!="object")return this;this.each(function(){if(this.nodeName.toLowerCase()!="select")return this;for(var b=this.options,g=b.length,a=0;a<g;a++)if(c.constructor==
RegExp)if(b[a].value.match(c))b[a].selected=true;else{if(h)b[a].selected=false}else if(b[a].value==c)b[a].selected=true;else if(h)b[a].selected=false});return this},copyOptions:function(c,d){var e=d||"selected";if(k(c).size()==0)return this;this.each(function(){if(this.nodeName.toLowerCase()!="select")return this;for(var f=this.options,h=f.length,b=0;b<h;b++)if(e=="all"||e=="selected"&&f[b].selected)f[b].value!=""&&k(c).addOption(f[b].value,f[b].text,false)});return this},containsOption:function(c,
d){var e=false,f=typeof c,h=typeof d;if(f!="string"&&f!="function"&&f!="object")return h=="function"?this:e;this.each(function(){if(this.nodeName.toLowerCase()!="select")return this;if(e&&h!="function")return false;for(var b=this.options,g=b.length,a=0;a<g;a++)if(c.constructor==RegExp){if(b[a].value.match(c)){e=true;h=="function"&&d.call(b[a],a)}}else if(b[a].value==c){e=true;h=="function"&&d.call(b[a],a)}});return h=="function"?this:e},selectedValues:function(){var c=[];this.selectedOptions().each(function(){c[c.length]=
this.value});return c},selectedTexts:function(){var c=[];this.selectedOptions().each(function(){c[c.length]=this.text});return c},selectedOptions:function(){return this.find("option:selected")}})})(jQuery);
