(function(b){b.widget("jv.combobox",{options:{list:null,listWidth:null,listHeight:null},_create:function(){for(var g=this,a=b(this.element),c=g.options,e='<ul class="ui-widget ui-combobox"><li class="ui-widget-content"><a href="javascript:void(0);" class="ui-combobox-toggleText"></a><span class="ui-icon ui-icon-triangle-1-s"></span><ul class="ui-combobox-list ui-widget-content">',d=0;d<c.list.length;d++)e+="<li class='ui-state-default "+(c.list[d].selected==true?"ui-state-highlight":"")+"' valueAlt='"+
c.list[d].value+"'><span>"+c.list[d].text+"</span></li>";e+="</ul></li></ul>";a.append(e).find("ul.ui-combobox li").click(function(){a.find("ul.ui-combobox-list:first").slideDown("fast").show()}).hover(function(){},function(){b(this).parent().find("ul.ui-combobox-list").slideUp("slow")}).find("ul.ui-combobox-list").css("width",parseInt(c.listWidth==null?a.find("ul.ui-combobox").outerWidth(true):c.listWidth)).css("height",parseInt(c.listHeight==null?a.find("ul.ui-combobox-list").outerHeight(true):
c.listHeight)).css("top",parseInt(a.find("li:first").outerHeight(true))).css("z-index",isNaN(a.find("li:first").css("z-index"))==true?9999:a.find("li:first").css("z-index")+1).find("li").hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")}).click(function(h){var f=a.find("ul.ui-combobox-list li.ui-state-highlight");a.find("a.ui-combobox-toggleText").html(b(this).text());b(this).parents("ul.ui-combobox-list:first").slideUp("slow");if(f.length==0||f.attr("valueAlt")!=
b(this).attr("valueAlt")){g._trigger("changed",null,{value:b(this).attr("valueAlt")});f.removeClass("ui-state-highlight");b(this).addClass("ui-state-highlight")}h.stopPropagation()});a.find("a.ui-combobox-toggleText").html(a.find("li.ui-state-highlight:first").length==0?a.find("ul.ui-combobox-list li:first").text():a.find("li.ui-state-highlight:first").text())},destroy:function(){b(this.element).find("*").remove();b.Widget.prototype.destroy.call(this)}})})(jQuery);
